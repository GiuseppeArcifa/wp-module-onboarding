{"version":3,"file":"src_OnboardingSPA_pages_Steps_DesignHomepageMenu_index_js.js","mappings":";;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;;AAEA,MAAMG,cAAc,GAAG,QAAkC;AAAA,MAAhC;AAAEC,IAAAA,KAAF;AAASC,IAAAA,QAAT;AAAmBC,IAAAA;AAAnB,GAAgC;AACxD,SACC,kEAAC,uDAAD;AAAc,aAAS,EAAC,kBAAxB;AAA2C,wBAAoB;AAA/D,KACC,kEAAC,8DAAD;AAAuB,SAAK,EAAGF,KAA/B;AAAuC,YAAQ,EAAGC;AAAlD,IADD,EAEC;AAAK,aAAS,EAAC;AAAf,IAFD,EAGC;AAAI,aAAS,EAAC;AAAd,KAA0CC,KAA1C,CAHD,EAIC,kEAAC,oDAAD,OAJD,CADD;AAQA,CATD;;AAWA,iEAAeH,cAAf;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACfA;;AAEA,MAAMK,iBAAiB,GAAG,MAAM;AAC/B,SACC;AAAK,aAAS,EAAC;AAAf,KACC,kEAAC,gDAAD;AACC,QAAI,EAAG,MADR;AAEC,aAAS,EAAC;AAFX,IADD,CADD;AAQA,CATD;;AAWA,iEAAeA,iBAAf;;;;;;;;;;;;;;;;;ACbA;;;;;;;;;;;;;;;;;ACAA;;AAEA,MAAMK,WAAW,GAAKC,SAAF,IAAiB;AACpC,SAAO;AACNC,IAAAA,MAAM,EAAE;AACPX,MAAAA,KAAK,EAAEQ,wDAAO;AACb;AACAD,MAAAA,mDAAE,CAAE,iCAAF,EAAqC,sBAArC,CAFW,EAGbG,SAHa,CADP;AAMPT,MAAAA,QAAQ,EAAEM,mDAAE,CACX,uEADW,EAEX,sBAFW;AANL,KADF;AAYNK,IAAAA,UAAU,EAAE;AACXZ,MAAAA,KAAK,EAAEQ,wDAAO;AACb;AACAD,MAAAA,mDAAE,CAAE,iCAAF,EAAqC,sBAArC,CAFW,EAGbG,SAHa,CADH;AAMXT,MAAAA,QAAQ,EAAEM,mDAAE,CACX,uEADW,EAEX,sBAFW,CAND;AAUXL,MAAAA,KAAK,EAAEK,mDAAE,CACR,sDADQ,EAER,sBAFQ;AAVE;AAZN,GAAP;AA4BA,CA7BD;;AA+BA,iEAAeE,WAAf;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjCA;AACA;AACA;AACA;AAEA;AACA;AACA;AAIA;AASA;AACA;AACA;;AAEA,MAAMsB,kBAAkB,GAAG,QAGpB;AAAA,MAHsB;AAC5BC,IAAAA,QAD4B;AAE5BC,IAAAA,uBAAuB,GAAG;AAFE,GAGtB;AACN,QAAMC,eAAe,GAAGjB,oEAAgB,CAAE,QAAF,CAAxC;AAEA,QAAM;AAAEkB,IAAAA,iBAAF;AAAqBzB,IAAAA;AAArB,MAAmCG,0DAAS,CAAIuB,MAAF,IAAc;AACjE,WAAO;AACND,MAAAA,iBAAiB,EAAEC,MAAM,CAAEjB,yCAAF,CAAN,CAA6BC,cAA7B,EADb;AAENV,MAAAA,SAAS,EAAE0B,MAAM,CAAEjB,yCAAF,CAAN,CAA6BkB,mBAA7B;AAFL,KAAP;AAIA,GALiD,EAK/C,EAL+C,CAAlD;AAOA,QAAMC,QAAQ,GAAG7B,qDAAW,CAAEC,SAAF,CAA5B;AAEA,QAAM;AACL6B,IAAAA,iBADK;AAELC,IAAAA,iBAFK;AAGLC,IAAAA,qBAHK;AAILC,IAAAA;AAJK,MAKF5B,4DAAW,CAAEK,yCAAF,CALf;;AAOA,QAAMwB,gBAAgB,GAAG,YAAY;AACpC,UAAMC,WAAW,GAAG,MAAMxB,iEAAc,CAAEO,0DAAF,CAAxC;;AACA,QAAKiB,WAAL,aAAKA,WAAL,eAAKA,WAAW,CAAE1C,KAAlB,EAA0B;AACzB,aAAOuB,+DAAP;AACA;;AACD,WAAOmB,WAAW,CAACC,IAAZ,CAAiBC,MAAxB;AACA,GAND;;AAQA,QAAMC,cAAc,GAAG,MAAM;AAC5BC,IAAAA,UAAU,CAAE,YAAY;AACvB,YAAMJ,WAAW,GAAG,MAAMD,gBAAgB,EAA1C;;AACA,UAAKC,WAAW,KAAKlB,2DAArB,EAA2C;AAC1C,eAAOa,iBAAiB,CAAEd,+DAAF,CAAxB;AACA;;AACDwB,MAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACA,KANS,EAMPvB,kEANO,CAAV;AAOA,GARD;;AAUA,QAAMwB,gBAAgB,GAAG,MAAM;AAC9B,QAAKlB,eAAL,EAAuB;AACtBM,MAAAA,iBAAiB,CAAE,IAAF,CAAjB;AACA;;AACDC,IAAAA,qBAAqB,CAAE,KAAF,CAArB;AACAC,IAAAA,4BAA4B,CAAE,IAAF,CAA5B;AACA,GAND;;AAQA,QAAMW,iBAAiB,GAAG,MAAM;AAC/Bb,IAAAA,iBAAiB,CAAE,KAAF,CAAjB;AACAC,IAAAA,qBAAqB,CAAE,IAAF,CAArB;AACAC,IAAAA,4BAA4B,CAAE,KAAF,CAA5B;AACA,GAJD;;AAMA,QAAMY,6BAA6B,GAAG,MAAM;AAC3C,QAAK,OAAOrB,uBAAP,KAAmC,UAAxC,EAAqD;AACpD,aAAOA,uBAAuB,EAA9B;AACA;;AACDmB,IAAAA,gBAAgB;AAChB,GALD;;AAOA,QAAMG,qBAAqB,GAAG,MAAM;AACnC,YAASpB,iBAAT;AACC,WAAKN,4DAAL;AACA,WAAKH,2DAAL;AACC,eAAO4B,6BAA6B,EAApC;;AACD;AACCD,QAAAA,iBAAiB;AALnB;AAOA,GARD;;AAUA,QAAMG,iBAAiB,GAAG,YAAY;AACrC,UAAMZ,WAAW,GAAG,MAAMD,gBAAgB,EAA1C;;AACA,YAASC,WAAT;AACC,WAAKpB,+DAAL;AACCuB,QAAAA,cAAc;AACd;;AACD,WAAKrB,2DAAL;AACCuB,QAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACA;;AACD;AACCZ,QAAAA,iBAAiB,CAAEK,WAAF,CAAjB;AARF;AAUA,GAZD;;AAcA5B,EAAAA,6DAAS,CAAE,MAAM;AAChBuC,IAAAA,qBAAqB;;AAErB,QAAKpB,iBAAiB,KAAKZ,yDAA3B,EAA+C;AAC9CiC,MAAAA,iBAAiB,CAAErB,iBAAF,CAAjB;AACA;AACD,GANQ,EAMN,CAAEA,iBAAF,CANM,CAAT;;AAQA,QAAMsB,oBAAoB,GAAG,YAAY;AACxClB,IAAAA,iBAAiB,CAAEf,+DAAF,CAAjB;AACA,UAAMkC,kBAAkB,GAAG,MAAMpC,0DAAY,CAC5CK,0DAD4C,EAE5C,IAF4C,EAG5C,KAH4C,CAA7C;;AAKA,QAAK+B,kBAAkB,CAACxD,KAAxB,EAAgC;AAC/B,aAAOqC,iBAAiB,CAAEV,4DAAF,CAAxB;AACA;;AAED,WAAOoB,MAAM,CAACC,QAAP,CAAgBC,MAAhB,EAAP;AACA,GAZD;;AAcA,QAAMQ,YAAY,GAAG,MAAM;AAC1B,YAASxB,iBAAT;AACC,WAAKV,+DAAL;AACC,eACC,kEAAC,yDAAD;AACC,oBAAU,EAAG,KADd;AAEC,qBAAW,EAAG,IAFf;AAGC,oBAAU,EAAGlB,mDAAE,CACd,gDADc,EAEd,sBAFc,CAHhB;AAOC,mBAAS,EAAGA,mDAAE,CACb,uHADa,EAEb,sBAFa,CAPf;AAWC,sBAAY,EAAGkD,oBAXhB;AAYC,6BAAmB,EAAGlD,mDAAE,CACvB,mBADuB,EAEvB,sBAFuB;AAZzB,UADD;;AAmBD,WAAKsB,4DAAL;AACC,eACC,kEAAC,uDAAD;AACC,eAAK,EAAGS,QAAQ,CAAC1B,UAAT,CAAoBZ,KAD7B;AAEC,kBAAQ,EAAGsC,QAAQ,CAAC1B,UAAT,CAAoBX,QAFhC;AAGC,eAAK,EAAGqC,QAAQ,CAAC1B,UAAT,CAAoBV;AAH7B,UADD;;AAOD,WAAKwB,2DAAL;AACC,eAAOM,QAAP;;AACD;AACC,eACC,kEAAC,gDAAD;AACC,eAAK,EAAGM,QAAQ,CAAC3B,MAAT,CAAgBX,KADzB;AAEC,kBAAQ,EAAGsC,QAAQ,CAAC3B,MAAT,CAAgBV;AAF5B,UADD;AAhCF;AAuCA,GAxCD;;AA0CA,SAAO,kEAAC,wDAAD,QAAY0D,YAAY,EAAxB,CAAP;AACA,CAtJD;;AAwJA,iEAAe5B,kBAAf;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChLA;AACA;AACA;AAEA;AACA;AACA;AACA;AAMA;AACA;AACA;AAKA;;AAEA,MAAMsC,sBAAsB,GAAG,MAAM;AAAA;;AACpC,QAAMnB,QAAQ,GAAGU,8DAAW,EAA5B;AACA,QAAM,CAAEU,eAAF,EAAmBC,kBAAnB,IAA0CV,4DAAQ,EAAxD;AACA,QAAM,CAAEW,mBAAF,EAAuBC,sBAAvB,IAAkDZ,4DAAQ,CAAE,EAAF,CAAhE;AACA,QAAM,CAAEa,gBAAF,EAAoBC,mBAApB,IAA4Cd,4DAAQ,CAAE,CAAF,CAA1D;AAEA,QAAM;AAAEe,IAAAA,WAAF;AAAeC,IAAAA,WAAf;AAA4BjC,IAAAA,WAA5B;AAAyCkC,IAAAA;AAAzC,MACLjE,0DAAS,CAAIuB,MAAF,IAAc;AACxB,WAAO;AACNwC,MAAAA,WAAW,EAAExC,MAAM,CAAEjB,yCAAF,CAAN,CAA6B4D,eAA7B,CACZ7B,QAAQ,CAAC8B,QADG,CADP;AAINH,MAAAA,WAAW,EACVzC,MAAM,CAAEjB,yCAAF,CAAN,CAA6B8D,wBAA7B,EALK;AAMNrC,MAAAA,WAAW,EAAER,MAAM,CAAEjB,yCAAF,CAAN,CAA6BC,cAA7B,EANP;AAON0D,MAAAA,eAAe,EACd1C,MAAM,CAAEjB,yCAAF,CAAN,CAA6B+D,kBAA7B;AARK,KAAP;AAUA,GAXQ,EAWN,EAXM,CADV;AAcA,QAAM;AACLC,IAAAA,mBADK;AAELC,IAAAA,oBAFK;AAGLC,IAAAA,wBAHK;AAIL9C,IAAAA;AAJK,MAKFzB,4DAAW,CAAEK,yCAAF,CALf;AAOAH,EAAAA,6DAAS,CAAE,MAAM;AAChBoE,IAAAA,oBAAoB,CAAEpB,0DAAF,CAApB;AACAmB,IAAAA,mBAAmB,CAAEpB,uDAAF,CAAnB;AACA,GAHQ,EAGN,EAHM,CAAT;;AAKA,WAASuB,gBAAT,CAA2BC,uBAA3B,EAAqD;AACpD,UAAMC,mBAAmB,GAAG,EAA5B;AACAD,IAAAA,uBAAuB,CAACE,OAAxB,CACGC,mBAAF,IAA2B;AAC1BF,MAAAA,mBAAmB,CAACG,IAApB,CAA0BD,mBAAmB,CAACE,OAA9C;AACApB,MAAAA,mBAAmB,CAACmB,IAApB,CAA0BD,mBAAmB,CAACG,IAA9C;AACA,KAJF;AAMApB,IAAAA,sBAAsB,CAAED,mBAAF,CAAtB;AACA,WAAOgB,mBAAP;AACA;;AAED,iBAAeM,uBAAf,GAAyC;AACxC,UAAMC,uBAAuB,GAAG,MAAMjC,gEAAW,CAChDc,WAAW,CAACoB,SADoC,CAAjD;;AAIA,QAAKD,uBAAL,aAAKA,uBAAL,eAAKA,uBAAuB,CAAE7F,KAA9B,EAAsC;AACrC,aAAOqC,iBAAiB,CAAEhB,yDAAF,CAAxB;AACA;;AAEDgD,IAAAA,kBAAkB,CAAEe,gBAAgB,CAAES,uBAAF,aAAEA,uBAAF,uBAAEA,uBAAuB,CAAElD,IAA3B,CAAlB,CAAlB;;AAEA,QAAK,CAAAgC,WAAW,SAAX,IAAAA,WAAW,WAAX,YAAAA,WAAW,CAAEoB,IAAb,CAAkBC,SAAlB,CAA4BC,QAA5B,MAAyC,EAA9C,EAAmD;AAClDxB,MAAAA,mBAAmB,CAClBH,mBADkB,aAClBA,mBADkB,uBAClBA,mBAAmB,CAAE4B,OAArB,CACCvB,WADD,aACCA,WADD,uBACCA,WAAW,CAAEoB,IAAb,CAAkBC,SAAlB,CAA4BC,QAD7B,CADkB,CAAnB;AAKA,KAND,MAMO;AACNtB,MAAAA,WAAW,CAACoB,IAAZ,CAAiBC,SAAjB,GAA6B,EAC5B,GAAGrB,WAAW,CAACoB,IAAZ,CAAiBC,SADQ;AAE5BC,QAAAA,QAAQ,EAAE3B,mBAAmB,CAAE,CAAF;AAFD,OAA7B;AAIAa,MAAAA,wBAAwB,CAAER,WAAF,CAAxB;AACA;AACD;;AAED,WAASwB,mBAAT,CAA8BC,GAA9B,EAAoC;AACnC3B,IAAAA,mBAAmB,CAAE2B,GAAF,CAAnB;AACA,UAAMH,QAAQ,GAAG3B,mBAAmB,CAAE8B,GAAF,CAApC;AACAzB,IAAAA,WAAW,CAACoB,IAAZ,CAAiBC,SAAjB,GAA6B,EAC5B,GAAGrB,WAAW,CAACoB,IAAZ,CAAiBC,SADQ;AAE5BC,MAAAA;AAF4B,KAA7B;AAIAd,IAAAA,wBAAwB,CAAER,WAAF,CAAxB;AACAT,IAAAA,iEAAe,CAAE,iBAAF,EAAqB+B,QAArB,CAAf;AACA;;AAEDnF,EAAAA,6DAAS,CAAE,MAAM;AAChB,QAAK4B,WAAW,KAAKlB,2DAArB,EAA2C;AAC1CoE,MAAAA,uBAAuB;AACvB;AACD,GAJQ,EAIN,CAAElD,WAAF,CAJM,CAAT;;AAMA,WAAS2D,qBAAT,GAAiC;AAChC,WAAOjC,eAAP,aAAOA,eAAP,uBAAOA,eAAe,CAAEkC,GAAjB,CAAsB,CAAEL,QAAF,EAAYG,GAAZ,KAAqB;AACjD,UAAKH,QAAL,EAAgB;AACf,eACC,kEAAC,8EAAD;AACC,aAAG,EAAGG,GADP;AAEC,mBAAS,EAAG,8BAFb;AAGC,kBAAQ,EAAGA,GAAG,KAAK5B,gBAHpB;AAIC,sBAAY,EAAGyB,QAJhB;AAKC,uBAAa,EAAG,IALjB;AAMC,iBAAO,EAAG,QANX;AAOC,iBAAO,EAAG,KAPX;AAQC,iBAAO,EAAG,MAAME,mBAAmB,CAAEC,GAAF;AARpC,UADD;AAYA;;AACD,aAAO,IAAP;AACA,KAhBM,CAAP;AAiBA;;AAED,SACC,kEAAC,yEAAD,QACC,kEAAC,yEAAD,QACC,kEAAC,kEAAD,QACC;AAAK,aAAS,EAAC;AAAf,KACC,kEAAC,yEAAD;AACC,SAAK,EAAG1B,WAAH,aAAGA,WAAH,uBAAGA,WAAW,CAAE6B,OADtB;AAEC,YAAQ,EAAG7B,WAAH,aAAGA,WAAH,uBAAGA,WAAW,CAAE8B;AAFzB,IADD,EAKC;AAAK,aAAS,EAAC;AAAf,KACC,kEAAC,wEAAD;AACC,SAAK,EAAGpC,eADT;AAEC,SAAK,2BACJQ,eAAe,CAAEF,WAAF,aAAEA,WAAF,uBAAEA,WAAW,CAAEoB,SAAf,CADX,0DACJ,sBACGW,YAJL;AAMC,YAAQ,EAAGJ,qBANZ;AAOC,aAAS,EAAG,8BAPb;AAQC,iBAAa,EAAG;AARjB,IADD,CALD,CADD,CADD,CADD,CADD;AA0BA,CArID;;AAuIA,iEAAelC,sBAAf","sources":["webpack://newfold.Onboarding/./src/OnboardingSPA/components/ErrorState/Step/index.js","webpack://newfold.Onboarding/./src/OnboardingSPA/components/Loaders/ImageUpload/index.js","webpack://newfold.Onboarding/./src/OnboardingSPA/components/Loaders/index.js","webpack://newfold.Onboarding/./src/OnboardingSPA/components/StateHandlers/Design/contents.js","webpack://newfold.Onboarding/./src/OnboardingSPA/components/StateHandlers/Design/index.js","webpack://newfold.Onboarding/./src/OnboardingSPA/pages/Steps/DesignHomepageMenu/index.js"],"sourcesContent":["import CommonLayout from '../../Layouts/Common';\nimport HeadingWithSubHeading from '../../HeadingWithSubHeading';\nimport NeedHelpTag from '../../NeedHelpTag';\n\nconst StepErrorState = ( { title, subtitle, error } ) => {\n\treturn (\n\t\t<CommonLayout className=\"step-error-state\" isVerticallyCentered>\n\t\t\t<HeadingWithSubHeading title={ title } subtitle={ subtitle } />\n\t\t\t<div className=\"step-error-state__logo\"></div>\n\t\t\t<h3 className=\"step-error-state__error\">{ error }</h3>\n\t\t\t<NeedHelpTag />\n\t\t</CommonLayout>\n\t);\n};\n\nexport default StepErrorState;\n","import Animate from '../../Animate';\n\nconst ImageUploadLoader = () => {\n\treturn (\n\t\t<div className=\"image-upload-loader--loading-box\">\n\t\t\t<Animate\n\t\t\t\ttype={ 'load' }\n\t\t\t\tclassName=\"image-upload-loader--loading-box__loader\"\n\t\t\t></Animate>\n\t\t</div>\n\t);\n};\n\nexport default ImageUploadLoader;\n","export { default as StepLoader } from \"./Step\";\nexport { default as ImageUploadLoader } from \"./ImageUpload\";\n","import { __, sprintf } from '@wordpress/i18n';\n\nconst getContents = ( brandName ) => {\n\treturn {\n\t\tloader: {\n\t\t\ttitle: sprintf(\n\t\t\t\t/* translators: %s: Brand */\n\t\t\t\t__( 'Preparing your %s design studio', 'wp-module-onboarding' ),\n\t\t\t\tbrandName\n\t\t\t),\n\t\t\tsubtitle: __(\n\t\t\t\t'Hang tight while we show you some of the best WordPress has to offer!',\n\t\t\t\t'wp-module-onboarding'\n\t\t\t),\n\t\t},\n\t\terrorState: {\n\t\t\ttitle: sprintf(\n\t\t\t\t/* translators: %s: Brand */\n\t\t\t\t__( 'Preparing your %s design studio', 'wp-module-onboarding' ),\n\t\t\t\tbrandName\n\t\t\t),\n\t\t\tsubtitle: __(\n\t\t\t\t'Hang tight while we show you some of the best WordPress has to offer!',\n\t\t\t\t'wp-module-onboarding'\n\t\t\t),\n\t\t\terror: __(\n\t\t\t\t'Uh-oh, something went wrong. Please contact support.',\n\t\t\t\t'wp-module-onboarding'\n\t\t\t),\n\t\t},\n\t};\n};\n\nexport default getContents;\n","import { useSelect, useDispatch } from '@wordpress/data';\nimport { Fragment, useEffect } from '@wordpress/element';\nimport { useViewportMatch } from '@wordpress/compose';\nimport { __ } from '@wordpress/i18n';\n\nimport { StepLoader } from '../../Loaders';\nimport { store as nfdOnboardingStore } from '../../../store';\nimport {\n\tgetThemeStatus,\n\tinstall as installTheme,\n} from '../../../utils/api/themes';\nimport {\n\tTHEME_STATUS_INIT,\n\tTHEME_STATUS_INSTALLING,\n\tTHEME_STATUS_NOT_ACTIVE,\n\tTHEME_STATUS_ACTIVE,\n\tDESIGN_STEPS_THEME,\n\tTHEME_INSTALL_WAIT_TIMEOUT,\n\tTHEME_STATUS_FAILURE,\n} from '../../../../constants';\nimport { StepErrorState } from '../../ErrorState';\nimport getContents from './contents';\nimport ExitToWordPress from '../../ExitToWordPress';\n\nconst DesignStateHandler = ( {\n\tchildren,\n\tnavigationStateCallback = false,\n} ) => {\n\tconst isLargeViewport = useViewportMatch( 'medium' );\n\n\tconst { storedThemeStatus, brandName } = useSelect( ( select ) => {\n\t\treturn {\n\t\t\tstoredThemeStatus: select( nfdOnboardingStore ).getThemeStatus(),\n\t\t\tbrandName: select( nfdOnboardingStore ).getNewfoldBrandName(),\n\t\t};\n\t}, [] );\n\n\tconst contents = getContents( brandName );\n\n\tconst {\n\t\tupdateThemeStatus,\n\t\tsetIsDrawerOpened,\n\t\tsetIsDrawerSuppressed,\n\t\tsetIsHeaderNavigationEnabled,\n\t} = useDispatch( nfdOnboardingStore );\n\n\tconst checkThemeStatus = async () => {\n\t\tconst themeStatus = await getThemeStatus( DESIGN_STEPS_THEME );\n\t\tif ( themeStatus?.error ) {\n\t\t\treturn THEME_STATUS_NOT_ACTIVE;\n\t\t}\n\t\treturn themeStatus.body.status;\n\t};\n\n\tconst waitForInstall = () => {\n\t\tsetTimeout( async () => {\n\t\t\tconst themeStatus = await checkThemeStatus();\n\t\t\tif ( themeStatus !== THEME_STATUS_ACTIVE ) {\n\t\t\t\treturn updateThemeStatus( THEME_STATUS_NOT_ACTIVE );\n\t\t\t}\n\t\t\twindow.location.reload();\n\t\t}, THEME_INSTALL_WAIT_TIMEOUT );\n\t};\n\n\tconst enableNavigation = () => {\n\t\tif ( isLargeViewport ) {\n\t\t\tsetIsDrawerOpened( true );\n\t\t}\n\t\tsetIsDrawerSuppressed( false );\n\t\tsetIsHeaderNavigationEnabled( true );\n\t};\n\n\tconst disableNavigation = () => {\n\t\tsetIsDrawerOpened( false );\n\t\tsetIsDrawerSuppressed( true );\n\t\tsetIsHeaderNavigationEnabled( false );\n\t};\n\n\tconst handleNavigationStateCallback = () => {\n\t\tif ( typeof navigationStateCallback === 'function' ) {\n\t\t\treturn navigationStateCallback();\n\t\t}\n\t\tenableNavigation();\n\t};\n\n\tconst handleNavigationState = () => {\n\t\tswitch ( storedThemeStatus ) {\n\t\t\tcase THEME_STATUS_FAILURE:\n\t\t\tcase THEME_STATUS_ACTIVE:\n\t\t\t\treturn handleNavigationStateCallback();\n\t\t\tdefault:\n\t\t\t\tdisableNavigation();\n\t\t}\n\t};\n\n\tconst handleThemeStatus = async () => {\n\t\tconst themeStatus = await checkThemeStatus();\n\t\tswitch ( themeStatus ) {\n\t\t\tcase THEME_STATUS_INSTALLING:\n\t\t\t\twaitForInstall();\n\t\t\t\tbreak;\n\t\t\tcase THEME_STATUS_ACTIVE:\n\t\t\t\twindow.location.reload();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tupdateThemeStatus( themeStatus );\n\t\t}\n\t};\n\n\tuseEffect( () => {\n\t\thandleNavigationState();\n\n\t\tif ( storedThemeStatus === THEME_STATUS_INIT ) {\n\t\t\thandleThemeStatus( storedThemeStatus );\n\t\t}\n\t}, [ storedThemeStatus ] );\n\n\tconst installThemeManually = async () => {\n\t\tupdateThemeStatus( THEME_STATUS_INSTALLING );\n\t\tconst themeInstallStatus = await installTheme(\n\t\t\tDESIGN_STEPS_THEME,\n\t\t\ttrue,\n\t\t\tfalse\n\t\t);\n\t\tif ( themeInstallStatus.error ) {\n\t\t\treturn updateThemeStatus( THEME_STATUS_FAILURE );\n\t\t}\n\n\t\treturn window.location.reload();\n\t};\n\n\tconst handleRender = () => {\n\t\tswitch ( storedThemeStatus ) {\n\t\t\tcase THEME_STATUS_NOT_ACTIVE:\n\t\t\t\treturn (\n\t\t\t\t\t<ExitToWordPress\n\t\t\t\t\t\tshowButton={ false }\n\t\t\t\t\t\tisModalOpen={ true }\n\t\t\t\t\t\tmodalTitle={ __(\n\t\t\t\t\t\t\t'It looks like you may have an existing website',\n\t\t\t\t\t\t\t'wp-module-onboarding'\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tmodalText={ __(\n\t\t\t\t\t\t\t'Going through this setup will change your active theme, WordPress settings, add content – would you like to continue?',\n\t\t\t\t\t\t\t'wp-module-onboarding'\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tmodalOnClose={ installThemeManually }\n\t\t\t\t\t\tmodalExitButtonText={ __(\n\t\t\t\t\t\t\t'Exit to WordPress',\n\t\t\t\t\t\t\t'wp-module-onboarding'\n\t\t\t\t\t\t) }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\tcase THEME_STATUS_FAILURE:\n\t\t\t\treturn (\n\t\t\t\t\t<StepErrorState\n\t\t\t\t\t\ttitle={ contents.errorState.title }\n\t\t\t\t\t\tsubtitle={ contents.errorState.subtitle }\n\t\t\t\t\t\terror={ contents.errorState.error }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\tcase THEME_STATUS_ACTIVE:\n\t\t\t\treturn children;\n\t\t\tdefault:\n\t\t\t\treturn (\n\t\t\t\t\t<StepLoader\n\t\t\t\t\t\ttitle={ contents.loader.title }\n\t\t\t\t\t\tsubtitle={ contents.loader.subtitle }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t}\n\t};\n\n\treturn <Fragment>{ handleRender() }</Fragment>;\n};\n\nexport default DesignStateHandler;\n","import { useLocation } from 'react-router-dom';\nimport { useState, useEffect } from '@wordpress/element';\nimport { useSelect, useDispatch } from '@wordpress/data';\n\nimport { getPatterns } from '../../../utils/api/patterns';\nimport { store as nfdOnboardingStore } from '../../../store';\nimport CommonLayout from '../../../components/Layouts/Common';\nimport {\n\tVIEW_NAV_DESIGN,\n\tTHEME_STATUS_ACTIVE,\n\tTHEME_STATUS_INIT,\n\tSIDEBAR_LEARN_MORE,\n} from '../../../../constants';\nimport HeadingWithSubHeading from '../../../components/HeadingWithSubHeading';\nimport { DesignStateHandler } from '../../../components/StateHandlers';\nimport {\n\tLivePreviewSelectableCard,\n\tLivePreviewSkeleton,\n\tGlobalStylesProvider,\n} from '../../../components/LivePreview';\nimport { trackHiiveEvent } from '../../../utils/analytics';\n\nconst StepDesignHomepageMenu = () => {\n\tconst location = useLocation();\n\tconst [ homepagePattern, setHomepagePattern ] = useState();\n\tconst [ homepagePatternList, setHomepagePatternList ] = useState( [] );\n\tconst [ selectedHomepage, setSelectedHomepage ] = useState( 0 );\n\n\tconst { currentStep, currentData, themeStatus, themeVariations } =\n\t\tuseSelect( ( select ) => {\n\t\t\treturn {\n\t\t\t\tcurrentStep: select( nfdOnboardingStore ).getStepFromPath(\n\t\t\t\t\tlocation.pathname\n\t\t\t\t),\n\t\t\t\tcurrentData:\n\t\t\t\t\tselect( nfdOnboardingStore ).getCurrentOnboardingData(),\n\t\t\t\tthemeStatus: select( nfdOnboardingStore ).getThemeStatus(),\n\t\t\t\tthemeVariations:\n\t\t\t\t\tselect( nfdOnboardingStore ).getStepPreviewData(),\n\t\t\t};\n\t\t}, [] );\n\n\tconst {\n\t\tsetDrawerActiveView,\n\t\tsetSidebarActiveView,\n\t\tsetCurrentOnboardingData,\n\t\tupdateThemeStatus,\n\t} = useDispatch( nfdOnboardingStore );\n\n\tuseEffect( () => {\n\t\tsetSidebarActiveView( SIDEBAR_LEARN_MORE );\n\t\tsetDrawerActiveView( VIEW_NAV_DESIGN );\n\t}, [] );\n\n\tfunction refactorPatterns( homepagePatternDataResp ) {\n\t\tconst makeHomepagePattern = [];\n\t\thomepagePatternDataResp.forEach(\n\t\t\t( homepagePatternData ) => {\n\t\t\t\tmakeHomepagePattern.push( homepagePatternData.content );\n\t\t\t\thomepagePatternList.push( homepagePatternData.slug );\n\t\t\t}\n\t\t);\n\t\tsetHomepagePatternList( homepagePatternList );\n\t\treturn makeHomepagePattern;\n\t}\n\n\tasync function getHomepagePatternsData() {\n\t\tconst homepagePatternDataTemp = await getPatterns(\n\t\t\tcurrentStep.patternId\n\t\t);\n\n\t\tif ( homepagePatternDataTemp?.error ) {\n\t\t\treturn updateThemeStatus( THEME_STATUS_INIT );\n\t\t}\n\n\t\tsetHomepagePattern( refactorPatterns( homepagePatternDataTemp?.body ) );\n\n\t\tif ( currentData?.data.sitePages.homepage !== '' ) {\n\t\t\tsetSelectedHomepage(\n\t\t\t\thomepagePatternList?.indexOf(\n\t\t\t\t\tcurrentData?.data.sitePages.homepage\n\t\t\t\t)\n\t\t\t);\n\t\t} else {\n\t\t\tcurrentData.data.sitePages = {\n\t\t\t\t...currentData.data.sitePages,\n\t\t\t\thomepage: homepagePatternList[ 0 ],\n\t\t\t};\n\t\t\tsetCurrentOnboardingData( currentData );\n\t\t}\n\t}\n\n\tfunction saveDataForHomepage( idx ) {\n\t\tsetSelectedHomepage( idx );\n\t\tconst homepage = homepagePatternList[ idx ];\n\t\tcurrentData.data.sitePages = {\n\t\t\t...currentData.data.sitePages,\n\t\t\thomepage,\n\t\t};\n\t\tsetCurrentOnboardingData( currentData );\n\t\ttrackHiiveEvent( 'homepage-layout', homepage );\n\t}\n\n\tuseEffect( () => {\n\t\tif ( themeStatus === THEME_STATUS_ACTIVE ) {\n\t\t\tgetHomepagePatternsData();\n\t\t}\n\t}, [ themeStatus ] );\n\n\tfunction buildHomepagePreviews() {\n\t\treturn homepagePattern?.map( ( homepage, idx ) => {\n\t\t\tif ( homepage ) {\n\t\t\t\treturn (\n\t\t\t\t\t<LivePreviewSelectableCard\n\t\t\t\t\t\tkey={ idx }\n\t\t\t\t\t\tclassName={ 'homepage_preview__list__item' }\n\t\t\t\t\t\tselected={ idx === selectedHomepage }\n\t\t\t\t\t\tblockGrammer={ homepage }\n\t\t\t\t\t\tviewportWidth={ 1200 }\n\t\t\t\t\t\tstyling={ 'custom' }\n\t\t\t\t\t\toverlay={ false }\n\t\t\t\t\t\tonClick={ () => saveDataForHomepage( idx ) }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn null;\n\t\t} );\n\t}\n\n\treturn (\n\t\t<DesignStateHandler>\n\t\t\t<GlobalStylesProvider>\n\t\t\t\t<CommonLayout>\n\t\t\t\t\t<div className=\"homepage_preview\">\n\t\t\t\t\t\t<HeadingWithSubHeading\n\t\t\t\t\t\t\ttitle={ currentStep?.heading }\n\t\t\t\t\t\t\tsubtitle={ currentStep?.subheading }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div className=\"homepage_preview__list\">\n\t\t\t\t\t\t\t<LivePreviewSkeleton\n\t\t\t\t\t\t\t\twatch={ homepagePattern }\n\t\t\t\t\t\t\t\tcount={\n\t\t\t\t\t\t\t\t\tthemeVariations[ currentStep?.patternId ]\n\t\t\t\t\t\t\t\t\t\t?.previewCount\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcallback={ buildHomepagePreviews }\n\t\t\t\t\t\t\t\tclassName={ 'homepage_preview__list__item' }\n\t\t\t\t\t\t\t\tviewportWidth={ 1200 }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</CommonLayout>\n\t\t\t</GlobalStylesProvider>\n\t\t</DesignStateHandler>\n\t);\n};\n\nexport default StepDesignHomepageMenu;\n"],"names":["CommonLayout","HeadingWithSubHeading","NeedHelpTag","StepErrorState","title","subtitle","error","Animate","ImageUploadLoader","default","StepLoader","__","sprintf","getContents","brandName","loader","errorState","useSelect","useDispatch","Fragment","useEffect","useViewportMatch","store","nfdOnboardingStore","getThemeStatus","install","installTheme","THEME_STATUS_INIT","THEME_STATUS_INSTALLING","THEME_STATUS_NOT_ACTIVE","THEME_STATUS_ACTIVE","DESIGN_STEPS_THEME","THEME_INSTALL_WAIT_TIMEOUT","THEME_STATUS_FAILURE","ExitToWordPress","DesignStateHandler","children","navigationStateCallback","isLargeViewport","storedThemeStatus","select","getNewfoldBrandName","contents","updateThemeStatus","setIsDrawerOpened","setIsDrawerSuppressed","setIsHeaderNavigationEnabled","checkThemeStatus","themeStatus","body","status","waitForInstall","setTimeout","window","location","reload","enableNavigation","disableNavigation","handleNavigationStateCallback","handleNavigationState","handleThemeStatus","installThemeManually","themeInstallStatus","handleRender","useLocation","useState","getPatterns","VIEW_NAV_DESIGN","SIDEBAR_LEARN_MORE","LivePreviewSelectableCard","LivePreviewSkeleton","GlobalStylesProvider","trackHiiveEvent","StepDesignHomepageMenu","homepagePattern","setHomepagePattern","homepagePatternList","setHomepagePatternList","selectedHomepage","setSelectedHomepage","currentStep","currentData","themeVariations","getStepFromPath","pathname","getCurrentOnboardingData","getStepPreviewData","setDrawerActiveView","setSidebarActiveView","setCurrentOnboardingData","refactorPatterns","homepagePatternDataResp","makeHomepagePattern","forEach","homepagePatternData","push","content","slug","getHomepagePatternsData","homepagePatternDataTemp","patternId","data","sitePages","homepage","indexOf","saveDataForHomepage","idx","buildHomepagePreviews","map","heading","subheading","previewCount"],"sourceRoot":""}