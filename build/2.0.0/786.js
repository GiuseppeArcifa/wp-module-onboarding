"use strict";(globalThis.webpackChunknewfold_Onboarding=globalThis.webpackChunknewfold_Onboarding||[]).push([[786],{9786:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var o=a(9196),n=a(9307),l=a(9818),r=a(5609),c=a(8148);const s=({idx:e,label:t,selectedPalette:a,setSelectedPalette:n,setSelectedColor:l,colors:r,setShowCustomColors:c=null})=>{const s=`conic-gradient(${r[e].primary} 90deg, ${r[e].secondary} 90deg 150deg, ${r[e].tertiary} 150deg 330deg, ${r[e].primary} 330deg 360deg)`,i="nfd-onboarding-sidebar--customize__color-palette-icon";return(0,o.createElement)("div",{className:`${i}__container`},(0,o.createElement)("div",{role:"presentation",className:a===e?`${i}__container__icon__selected`:`${i}__container__icon`,style:{background:s},onClick:()=>{n(e),l(r[e]),c&&c(!1)}}),(0,o.createElement)("p",null,t))};var i=a(5736);const m=({onChange:e,palettePrimaryColors:t})=>{const[a,l]=(0,n.useState)(t[0].color),c=[{colors:t,name:(0,i.__)("THEME","wp-module-onboarding")}];return(0,o.createElement)(r.Popover,{placement:"left"},(0,o.createElement)("div",{className:"nfd-onboarding-sidebar--customize__custom-color-palette__container"},(0,o.createElement)(r.ColorPalette,{colors:c,value:a,onChange:t=>{l(t),e(t)}})))};var _=a(4403),d=a(2819);let u=null;const p=(0,o.forwardRef)((({baseClassName:e="nfd-onboarding-sidebar--customize__design-colors-panel",heading:t},a)=>{const p=()=>{$&&(D(0),S(C[0]),w(!1));const e=g.sitegen?.homepages?.active?.slug;if(e){const t=u[e];if(t){const e={...g,sitegen:{...g.sitegen,homepages:{...g.sitegen.homepages,active:{...g.sitegen.homepages.active,color:{...g.sitegen.homepages.active.color,palette:[...t.color.palette]}}}}};S(null),D(null),j(e)}}};(0,o.useImperativeHandle)(a,(()=>({resetToDefaultColors:p})));const{currentData:g,customizeSidebarData:b}=(0,l.useSelect)((e=>({currentData:e(_.h).getCurrentOnboardingData(),customizeSidebarData:e(_.h).getCustomizeSidebarData()})));(0,n.useEffect)((()=>{u||(u=(0,d.cloneDeep)(g.sitegen.homepages.data))}),[g]);const E=b?.colorPalettes,h=Object.entries(E[0]).map((([,e])=>({name:(0,i.__)("Custom","wp-module-onboarding"),color:e}))),y=[];E.forEach((e=>{y.push({primary:e?.primary,secondary:e?.secondary||e?.base,tertiary:e?.tertiary||e?.primary})}));const[C]=(0,n.useState)(y),[v,S]=(0,n.useState)(null),[f,w]=(0,n.useState)(!1),[$,N]=(0,n.useState)(!1),[P,k]=(0,n.useState)(!1),[O,D]=(0,n.useState)(null),[x,z]=(0,n.useState)(""),[T,R]=(0,n.useState)(!1),B=C.length-1,U=e=>{R(!T),z(T?"":e)},{setCurrentOnboardingData:j}=(0,l.useDispatch)(_.h),A=e=>{const t=[];for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)){const o=a.replace(/_/g,"-"),n=e[a],l=a.split("_").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ");t.push({slug:o,color:n,name:l})}return t};(0,n.useEffect)((()=>{null!==v&&null!==O&&(()=>{const e=g.sitegen?.homepages?.active?.slug;e&&(E[O].primary=v.primary,E[O].secondary?E[O].secondary=v.secondary:E[O].base=v.secondary,E[O].tertiary=v.tertiary,g.sitegen.homepages.data[e].color.palette=A(E[O]),g.sitegen.homepages.active.color.palette=A(E[O]),j(g))})()}),[v,O]);return(0,o.createElement)(r.PanelBody,{className:e,initialOpen:!0},(0,o.createElement)(r.PanelRow,null,(0,o.createElement)("div",{className:`${e}__container`},(0,o.createElement)("div",{className:`${e}__container__text`},(0,o.createElement)("p",{className:`${e}__container__text__heading`},(0,o.createElement)("strong",null,t)),(0,o.createElement)("div",{className:`${e}__container__color__palette__icon`},C.map(((e,t)=>(0,o.createElement)(s,{key:t,idx:t,label:0===t?(0,i.__)("Default","wp-module-onboarding"):"",selectedPalette:O,setSelectedPalette:D,setSelectedColor:S,colors:C,setShowCustomColors:w}))))))),(0,o.createElement)(r.PanelRow,null,!f&&(0,o.createElement)("div",{className:`${e}__custom__colors__button__container`},(0,o.createElement)(r.Button,{onClick:()=>(D(B),S(C[B]),w(!0),void(P||N(!0)))},(0,i.__)("Pick your own colors","wp-module-onboarding"))),f&&$&&(0,o.createElement)("div",{className:`${e}__custom__colors__container`},(0,o.createElement)("h5",{className:`${e}__heading`},(0,i.__)("CUSTOM COLORS","wp-module-onboarding")),(0,o.createElement)("div",null,["primary","secondary","tertiary"].map(((e,t)=>(0,o.createElement)(c.Z,{key:t,isColorSelected:v,color:v[e],slug:e,name:e.charAt(0).toUpperCase()+e.slice(1),callback:U})))),(0,o.createElement)("div",{className:`${e}__custom__colors__container__buttons`},(0,o.createElement)(r.Button,{onClick:()=>{P?N(!1):w(!1)},className:"cancel"},(0,i.__)("Cancel","wp-module-onboarding")),(0,o.createElement)(r.Button,{onClick:()=>{k(!0),N(!1),D(B),C[O]=v},variant:"primary"},(0,i.__)("Apply","wp-module-onboarding"))),T&&(0,o.createElement)(m,{onChange:e=>{const t={...v};t[x]=e,S(t)},palettePrimaryColors:h})),f&&!$&&(0,o.createElement)("div",{className:`${e}__custom-color-palette__container`},(0,o.createElement)("div",{className:`${e}__custom-color-palette__container__header`},(0,o.createElement)("h5",{className:`${e}__heading`},(0,o.createElement)("span",null,(0,i.__)("CUSTOM COLORS","wp-module-onboarding"))),(0,o.createElement)("button",{onClick:()=>(D(B),S(C[B]),void N(!0))},(0,i.__)("Edit colors","wp-module-onboarding"))),(0,o.createElement)("div",{style:{marginLeft:"5px"}},(0,o.createElement)(s,{key:B,idx:B,selectedPalette:O,setSelectedPalette:D,setSelectedColor:S,colors:C})))))}))}}]);