"use strict";(globalThis.webpackChunknewfold_Onboarding=globalThis.webpackChunknewfold_Onboarding||[]).push([[539],{539:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var a=n(9196),i=n(5634),r=n(9307),s=n(9818),o=n(4403),g=n(2200),d=n(9250),l=n(8707),c=n(5736);const _=()=>(0,a.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"24",viewBox:"-5 -2 36 24",fill:"none",className:"heart"},(0,a.createElement)("g",{id:"State=Active"},(0,a.createElement)("path",{id:"Vector",d:"M10 19.1585L8.975 18.2335C7.20833 16.6168 5.75 15.221 4.6 14.046C3.45 12.871 2.53333 11.821 1.85 10.896C1.16667 9.971 0.6875 9.1335 0.4125 8.3835C0.1375 7.6335 0 6.87516 0 6.1085C0 4.6085 0.504167 3.35433 1.5125 2.346C2.52083 1.33766 3.76667 0.833496 5.25 0.833496C6.2 0.833496 7.07917 1.0585 7.8875 1.5085C8.69583 1.9585 9.4 2.6085 10 3.4585C10.7 2.5585 11.4417 1.896 12.225 1.471C13.0083 1.046 13.85 0.833496 14.75 0.833496C16.2333 0.833496 17.4792 1.33766 18.4875 2.346C19.4958 3.35433 20 4.6085 20 6.1085C20 6.87516 19.8625 7.6335 19.5875 8.3835C19.3125 9.1335 18.8333 9.971 18.15 10.896C17.4667 11.821 16.55 12.871 15.4 14.046C14.25 15.221 12.7917 16.6168 11.025 18.2335L10 19.1585Z",fill:"#EF4A71"}))),m=function({count:e=1,isRegenerating:t}){const n=[];for(let i=0;i<e;i++)n.push((0,a.createElement)("div",{key:i,className:"regenerating-site-card-wrap"},(0,a.createElement)("div",{className:"regenerating-site-card"},(0,a.createElement)("p",{className:"regenerating-site-card__title"},t?(0,c.__)("Regenerating Site","wp-module-onboarding"):(0,c.__)("Generating Site","wp-module-onboarding")),(0,a.createElement)("div",{className:"regenerating-site-card__progress-bar"},(0,a.createElement)("div",{style:{animationDuration:2e3*Math.random()+1500+"ms"},className:"regenerating-site-card__progress-bar__fill"})))));return(0,a.createElement)(a.Fragment,null,n)};var p=n(5289),u=n(7625),v=n(2819);const b=()=>{const e=(0,d.s0)(),[t,n]=(0,r.useState)(!1),[b,h]=(0,r.useState)(!1),[w,f]=(0,r.useState)(!1),[E,C]=(0,r.useState)(!1),{setIsHeaderEnabled:N,setSidebarActiveView:y,setHeaderActiveView:S,setDrawerActiveView:D,setCurrentOnboardingData:k,updateInitialize:F,setHideFooterNav:x}=(0,s.useDispatch)(o.h),{currentData:R,nextStep:A}=(0,s.useSelect)((e=>({currentData:e(o.h).getCurrentOnboardingData(),nextStep:e(o.h).getNextStep()})));(0,r.useEffect)((()=>{N(!0),x(!0),y(!1),S(g.G5),D(!1),F(!0)}),[R]),(0,r.useEffect)((()=>{(async()=>{if(f(!0),!(0,v.isEmpty)(R.sitegen.homepages.data))return n(R.sitegen.homepages.data),void f(!1);if(""===R.sitegen.siteDetails?.prompt)return void f(!1);const e=await(0,p.nM)(R.sitegen.siteDetails.prompt);e.error||(R.sitegen.homepages.data=e.body,n(e.body),k(R)),f(!1)})(),(async()=>{const e=await(0,u.oC)();e.error?f(!1):C(e.body)})()}),[]);const V=n=>{if(!(n in t))return!1;R.sitegen.homepages.active=t[n],R.sitegen.skipCache=!1,k(R),e(A.path)},O=e=>{if(!(e in t))return;const a=!t[e].isFavorite;t[e].isFavorite=a,R.sitegen.homepages.data=t,n(t),k(R)},G=async(e,a,i)=>{if(document.getElementsByClassName("nfd-onboarding-step--site-gen__preview__note")&&document.getElementsByClassName("nfd-onboarding-step--site-gen__preview__note")[0].scrollIntoView({behavior:"smooth",block:"end"}),h(!0),!(e in t))return void h(!1);if(""===R.sitegen.siteDetails?.prompt)return void h(!1);const r=await(0,p.HV)(R.sitegen.siteDetails.prompt,e,a,i);if(r.error)return void h(!1);const s=r.body;t[s.slug]=s,R.sitegen.homepages.data=t,n(t),k(R),h(!1)},H={heading:(0,c.__)("Presto, here are 3 versions","wp-module-onboarding"),subheading:(0,c.__)("We've created 3 unique website designs for you to start with, preview click around or start over.","wp-module-onboarding"),favouriteNote:(0,c.__)("Favorite a generated version to find and use again in the future.","wp-module-onboarding"),generating:(0,c.__)("Generating Site","wp-module-onboarding"),regenerating:(0,c.__)("Regenerating Site","wp-module-onboarding")};return(0,a.createElement)(i.Z,{className:"nfd-onboarding-step--site-gen__preview"},(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__preview__container"},(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__preview__container__heading"},(0,a.createElement)("p",{className:"nfd-onboarding-step--site-gen__preview__container__heading__text"},H.heading)),(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__preview__container__sub-heading"},(0,a.createElement)("p",{className:"nfd-onboarding-step--site-gen__preview__container__sub-heading__text"},H.subheading))),(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__preview__options"},t&&E&&!w?Object.keys(t).map(((e,n)=>{const i=t[e],r=(0,v.cloneDeep)(E[0]);r.settings.color.palette=i.color.palette;let s="";return["header","content","footer"].forEach((e=>{e in i&&(s+=i[e])})),(0,a.createElement)(l.ZA,{key:n,blockGrammar:s,previewSettings:r,slug:e,title:i.title,isFavorite:i.isFavorite,palette:i.color,styling:"custom",overlay:!0,tabIndex:"0",role:"button",handleFavorite:O,handleRegenerate:G,handlePreview:V,isRegenerating:b})})):(0,a.createElement)(m,{count:3,isRegenerating:!1}),b&&(0,a.createElement)(m,{count:1,isRegenerating:!0})),(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__preview__note"},(0,a.createElement)(_,null),(0,a.createElement)("span",null,H.favouriteNote)))}}}]);