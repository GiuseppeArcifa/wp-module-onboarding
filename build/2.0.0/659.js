"use strict";(globalThis.webpackChunknewfold_Onboarding=globalThis.webpackChunknewfold_Onboarding||[]).push([[659],{7231:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(9196),o=a(444);const i=(0,n.createElement)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,n.createElement)(o.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"}))},9978:(e,t,a)=>{a.d(t,{Z:()=>_});var n=a(9196),o=a(3967),i=a.n(o),r=a(9250),l=a(9818),s=a(5609),d=a(1984),c=a(5024),g=a(4403);const _=({text:e,className:t,callback:a=null,disabled:o=!1,showChevronRight:_=!0})=>{const m=(0,r.s0)(),{nextStep:u}=(0,l.useSelect)((e=>({nextStep:e(g.h).getNextStep()})));return(0,n.createElement)(s.Button,{className:i()("nfd-onboarding-button--site-gen-next",{"nfd-onboarding-button--site-gen-next--disabled":o},t),onClick:()=>{o||(a&&"function"==typeof a&&a(),u&&m(u.path))}},(0,n.createElement)("p",{className:"nfd-onboarding-button--site-gen-next--text"},e),_&&(0,n.createElement)(d.Z,{className:"nfd-onboarding-button--site-gen-next--icon",icon:c.Z}))}},3467:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(9196),o=a(9307),i=a(3926);const r=(0,o.memo)((({title:e})=>(0,n.createElement)("div",{className:"ai-heading"},(0,n.createElement)(i.Z,{height:"40px"}),(0,n.createElement)("div",{className:"ai-heading--title"},e))))},3926:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(9196),o=a(9307);const i=({height:e="80px"})=>{const t={"--wnd-ai-logo-size":e,height:`var(--wnd-ai-logo-size, ${e})`};return(0,o.useEffect)((()=>{document.querySelectorAll("[data-wnd-ai-logo]").forEach((function(e){let t=!1,a=null;const n=()=>{t?document.body.classList.add("wnd-ai-logo-keydown"):document.body.classList.remove("wnd-ai-logo-keydown"),a=null};e.addEventListener("keydown",(function(){t||(t=!0,a||(a=window.requestAnimationFrame(n)))})),e.addEventListener("keyup",(function(){t=!1,a||(a=window.requestAnimationFrame(n))}))}))}),[]),(0,n.createElement)("span",{className:"wnd-ai-logo",style:t},(0,n.createElement)("span",{className:"wnd-ai-logo__circle wnd-ai-logo__circle--bg"}),(0,n.createElement)("span",{className:"wnd-ai-logo__circle wnd-ai-logo__circle--1"}),(0,n.createElement)("span",{className:"wnd-ai-logo__circle wnd-ai-logo__circle--2"}),(0,n.createElement)("span",{className:"wnd-ai-logo__circle wnd-ai-logo__circle--3"}),(0,n.createElement)("span",{className:"wnd-ai-logo__circle wnd-ai-logo__circle--4"}),(0,n.createElement)("span",{className:"wnd-ai-logo__circle wnd-ai-logo__circle--5"}),(0,n.createElement)("span",{className:"wnd-ai-logo__circle wnd-ai-logo__circle--6"}),(0,n.createElement)("span",{className:"wnd-ai-logo__spinner"}))}},676:(e,t,a)=>{a.d(t,{Z:()=>f});var n=a(9196),o=a(5736),i=a(9307),r=a(5609),l=a(9818),s=a(9250),d=a(7207),c=a(7533),g=a(4403),_=a(8395),m=a(2200),u=a(6342),p=a(3967),b=a.n(p);const f=(0,i.memo)((({callback:e=!1,className:t,text:a})=>{const i=(0,s.s0)(),p=(0,s.TH)(),{nextStep:f,currentData:w,socialData:h}=(0,l.useSelect)((e=>({nextStep:e(g.h).getNextStep(),currentData:e(g.h).getCurrentOnboardingData(),socialData:e(g.h).getOnboardingSocialData()})),[]),v=null===f||!1===f,{setOnboardingSocialData:E}=(0,l.useDispatch)(g.h);return(0,n.createElement)(r.Button,{className:b()("skip-button",t),onClick:v?()=>async function(e){if(w){if(w.isComplete=(new Date).getTime(),e?.includes("basic-info")){const e=await async function(){const e=await(0,_.Gw)(),t=await(0,_.I2)(h);return null!==t?.error?e?.body:t?.body}();e&&E(e),await d.v.dispatchEvents(u.En)}(0,c.kB)(w)}window.location.replace(m.br)}(p.pathname):()=>("function"==typeof e&&e(),void i(f.path))},a||(0,o.__)("Skip this Step","wp-module-onboarding"))}))},1659:(e,t,a)=>{a.r(t),a.d(t,{default:()=>S});var n=a(9196),o=a(4333),i=a(9307),r=a(9818),l=a(7798),s=a(5736);var d=a(2200),c=a(676),g=a(4403),_=a(3467),m=a(5634),u=a(9978),p=a(2964),b=a(4310),f=a(6372),w=a(3967),h=a.n(w),v=a(9830),E=a.n(v),x=a(1984),N=a(7231);const y=(0,i.memo)((({image:e,imageSetter:t})=>{const a=(0,i.useRef)(null),{theme:o}=(0,i.useContext)(f.N),[r,l]=(0,i.useState)(!1),[c,g]=(0,i.useState)(!1);async function _(e){if(e){l(!0);const a=await(0,p.I)(e);if(!a?.body)return l(!1);const n=a.body?.id,o=a.body?.source_url;t({id:n,url:o,fileName:e?.name,fileSize:e?.size})}l(!1)}const m=!r&&0!==e?.id&&void 0!==e?.id;return(0,n.createElement)("div",{className:`nfd-onboarding-image-uploader--with-text ${c&&"nfd-onboarding-image-uploader--with-text--on-drag"} ${m&&"nfd-onboarding-image-uploader--with-text--not-dashed"}`,onDrop:e=>(e=>{e.preventDefault(),e.stopPropagation(),g(!1),e?.dataTransfer?.files&&e?.dataTransfer?.files.length>0&&"image"===e?.dataTransfer?.files[0]?.type.split("/")[0]&&_(e?.dataTransfer?.files[0])})(e),onDragOver:e=>(e=>{e.preventDefault(),e.stopPropagation(),g(!0)})(e),onDragEnter:e=>(e=>{e.preventDefault(),e.stopPropagation(),g(!0)})(e),onDragLeave:e=>(e=>{e.preventDefault(),e.stopPropagation(),g(!1)})(e)},r?(0,n.createElement)(b.Z,null):(0,n.createElement)(n.Fragment,null,!m&&(0,n.createElement)(n.Fragment,null,(0,n.createElement)("div",{className:"nfd-onboarding-image-uploader--with-text__heading"},(0,n.createElement)("div",{className:h()("nfd-onboarding-image-uploader--with-text__heading__icon",o===d.qx?"nfd-onboarding-image-uploader--with-text__heading__icon--light":null)}),(0,n.createElement)("p",{className:"nfd-onboarding-image-uploader--with-text__heading__text"},(0,n.createElement)("span",{className:"nfd-onboarding-image-uploader--with-text__heading__text__drop"},(0,s.__)("Drop your logo here, or ","wp-module-onboarding")),(0,n.createElement)("button",{onClick:()=>{a?.current.click()},className:"nfd-onboarding-image-uploader--with-text__heading__text__modal"},(0,s.__)("browse","wp-module-onboarding")),(0,n.createElement)("input",{className:"nfd-onboarding-image-uploader--with-text__heading__text__input",accept:"image/*",type:"file",ref:a,onChange:e=>{e?.target?.files&&e?.target?.files.length>0&&_(e?.target?.files[0])}}))),(0,n.createElement)("div",{className:"nfd-onboarding-image-uploader--with-text__subheading"},(0,n.createElement)("p",{className:"nfd-onboarding-image-uploader--with-text__subheading__text"},(0,s.__)("supports .jpg, .png, .gif","wp-module-onboarding")))),m&&(0,n.createElement)("div",{className:"nfd-onboarding-image-uploader--with-text__site_logo__preview"},(0,n.createElement)("img",{className:"nfd-onboarding-image-uploader--with-text__site_logo__preview__image",src:e.url,alt:(0,s.__)("Site Logo Preview","wp-module-onboarding")}),(0,n.createElement)("div",{className:"nfd-onboarding-image-uploader--with-text__site_logo__preview__details"},(0,n.createElement)("p",{className:"nfd-onboarding-image-uploader--with-text__site_logo__preview__details__filename"},e.fileName),(0,n.createElement)("p",{className:"nfd-onboarding-image-uploader--with-text__site_logo__preview__details__filesize"},E()(e.fileSize))),(0,n.createElement)("div",{className:"nfd-onboarding-image-uploader--with-text__site_logo__preview__reset"},(0,n.createElement)("button",{className:"nfd-onboarding-image-uploader--with-text__site_logo__preview__reset__button",onClick:()=>{t({id:0,url:""}),a?.current?.files.length>0&&(a.current.value="")}},(0,n.createElement)(x.Z,{className:"nfd-onboarding-image-uploader--with-text__site_logo__preview__reset__button__icon",icon:N.Z}))))))})),S=()=>{const[e,t]=(0,i.useState)(),a=(0,o.useViewportMatch)("small"),{currentData:p}=(0,r.useSelect)((e=>({currentData:e(g.h).getCurrentOnboardingData()}))),{editEntityRecord:b}=(0,r.useDispatch)(l.store),{getEditedEntityRecord:f}=(0,r.useSelect)((e=>e(l.store)),[]),{setIsFooterNavAllowed:w,setIsHeaderEnabled:h,setSidebarActiveView:v,setHeaderActiveView:E,setDrawerActiveView:x,setHideFooterNav:N,setCurrentOnboardingData:S}=(0,r.useDispatch)(g.h);(0,i.useEffect)((()=>{if(N(!1),h(!0),v(!1),E(d.G5),x(!1),0!==p.data.siteLogo?.id)return t(p.data.siteLogo);w(!1),f("root","site")}),[]);const D={heading:(0,s.__)("Do you have a logo you would like to use for this site?","wp-module-onboarding"),imageUploader:{subHeading:(0,s.__)("supports .jpg, .png, .svg","wp-module-onboarding")},buttons:{skip:(0,s.__)("Skip for now","wp-module-onboarding"),next:(0,s.__)("Next","wp-module-onboarding")}};return(0,n.createElement)(m.Z,{isCentered:!0,className:"nfd-onboarding-step--site-gen__site-logo"},(0,n.createElement)("div",{className:"nfd-onboarding-step--site-gen__site-logo__container"},(0,n.createElement)(_.Z,{title:D.heading}),(0,n.createElement)(y,{image:e,imageSetter:e=>{const a={...p};a.data.siteLogo.id=e.id,a.data.siteLogo.url=e.url,a.data.siteLogo.fileName=e.fileName,a.data.siteLogo.fileSize=e.fileSize,S(a),w(0!==e.id),b("root","site",void 0,{site_logo:e.id}),t(e)}}),(0,n.createElement)("div",{className:"nfd-onboarding-step--site-gen__site-logo__container__buttons"},(0,n.createElement)(c.Z,{callback:()=>(()=>{const e={...p};e.sitegen.siteLogo={id:0,url:"",fileName:"",fileSize:0},S(e),t(void 0),w(!1)})(),className:"nfd-onboarding-step--site-gen__site-logo__container__buttons__skip",text:D.buttons.skip}),a&&(0,n.createElement)(u.Z,{text:D.buttons.next,disabled:void 0===e||0===e?.id}))))}},2964:(e,t,a)=>{a.d(t,{I:()=>l});var n=a(6329),o=a(4704),i=a(6989),r=a.n(i);async function l(e){const t=await function(e){return new Promise(((t,a)=>{const n=new FileReader;n.addEventListener("loadend",(e=>t(e.target.result))),n.addEventListener("error",a),n.readAsArrayBuffer(e)}))}(e),a={"Content-Type":"image/png"};return a["Content-Disposition"]="attachment; filename="+e.name,await(0,n.D)(r()({url:(0,o.$L)("media"),method:"POST",headers:a,body:t}))}},9830:e=>{e.exports=function(e,t){return"string"==typeof e?r(e):"number"==typeof e?i(e,t):null},e.exports.format=i,e.exports.parse=r;var t=/\B(?=(\d{3})+(?!\d))/g,a=/(?:\.0*|(\.[^0]+)0+)$/,n={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},o=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function i(e,o){if(!Number.isFinite(e))return null;var i=Math.abs(e),r=o&&o.thousandsSeparator||"",l=o&&o.unitSeparator||"",s=o&&void 0!==o.decimalPlaces?o.decimalPlaces:2,d=Boolean(o&&o.fixedDecimals),c=o&&o.unit||"";c&&n[c.toLowerCase()]||(c=i>=n.pb?"PB":i>=n.tb?"TB":i>=n.gb?"GB":i>=n.mb?"MB":i>=n.kb?"KB":"B");var g=(e/n[c.toLowerCase()]).toFixed(s);return d||(g=g.replace(a,"$1")),r&&(g=g.split(".").map((function(e,a){return 0===a?e.replace(t,r):e})).join(".")),g+l+c}function r(e){if("number"==typeof e&&!isNaN(e))return e;if("string"!=typeof e)return null;var t,a=o.exec(e),i="b";return a?(t=parseFloat(a[1]),i=a[4].toLowerCase()):(t=parseInt(e,10),i="b"),isNaN(t)?null:Math.floor(n[i]*t)}}}]);