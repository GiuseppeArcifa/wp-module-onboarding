"use strict";(globalThis.webpackChunknewfold_Onboarding=globalThis.webpackChunknewfold_Onboarding||[]).push([[619],{7673:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(1609),r=n(8468);const i=({height:e="80px"})=>{const t={"--wnd-ai-logo-size":e,height:`var(--wnd-ai-logo-size, ${e})`};return(0,r.useEffect)((()=>{document.querySelectorAll("[data-wnd-ai-logo]").forEach((function(e){let t=!1,n=null;const a=()=>{t?document.body.classList.add("wnd-ai-logo-keydown"):document.body.classList.remove("wnd-ai-logo-keydown"),n=null};e.addEventListener("keydown",(function(){t||(t=!0,n||(n=window.requestAnimationFrame(a)))})),e.addEventListener("keyup",(function(){t=!1,n||(n=window.requestAnimationFrame(a))}))}))}),[]),(0,a.createElement)("span",{className:"wnd-ai-logo",style:t},(0,a.createElement)("span",{className:"wnd-ai-logo__circle wnd-ai-logo__circle--bg"}),(0,a.createElement)("span",{className:"wnd-ai-logo__circle wnd-ai-logo__circle--1"}),(0,a.createElement)("span",{className:"wnd-ai-logo__circle wnd-ai-logo__circle--2"}),(0,a.createElement)("span",{className:"wnd-ai-logo__circle wnd-ai-logo__circle--3"}),(0,a.createElement)("span",{className:"wnd-ai-logo__circle wnd-ai-logo__circle--4"}),(0,a.createElement)("span",{className:"wnd-ai-logo__circle wnd-ai-logo__circle--5"}),(0,a.createElement)("span",{className:"wnd-ai-logo__circle wnd-ai-logo__circle--6"}),(0,a.createElement)("span",{className:"wnd-ai-logo__spinner"}))}},8844:(e,t,n)=>{n.d(t,{A:()=>E});var a=n(1609),r=n(8468),i=n(7143),o=n(7675),s=n(1056),d=n(2202),l=n(8744),c=n(9491),g=n(7723);var _=n(6427),u=n(3988),m=n(7673),p=n(2940),w=n(7835),b=n(148),f=n(8969);const v=()=>{const e=(0,b.Zp)(),{setIsHeaderEnabled:t,setSidebarActiveView:n,setHeaderActiveView:s,setDrawerActiveView:d,setHideFooterNav:v,setIsHeaderNavigationEnabled:E,updateAllSteps:h,updateTopSteps:y,updateRoutes:N,updateDesignRoutes:S,updateInitialize:C,setCurrentOnboardingData:k,updateSiteGenErrorStatus:x}=(0,i.useDispatch)(o.M);(0,r.useEffect)((()=>{v(!0),t(!0),n(!1),s(f.Ix),E(!0),d(!1)}));const{brandConfig:A,currentData:F}=(0,i.useSelect)((e=>({brandConfig:e(o.M).getNewfoldBrandConfig(),currentData:e(o.M).getCurrentOnboardingData()}))),D=(0,c.useViewportMatch)("small"),I={heading:(0,g.__)("Sorry, we're having trouble communicating with our AI service.","wp-module-onboarding"),subHeading:(0,g.__)("Do you keep getting this error?","wp-module-onboarding"),message:(0,g.__)("If you continue to get this error, you may either continue creating your site without using our AI assistant, or you can ","wp-module-onboarding"),buttonText:(0,g.__)("Try again","wp-module-onboarding"),buttonSkip:(0,g.__)("Continue without AI","wp-module-onboarding"),buttonExit:(0,g.__)("exit to WordPress","wp-module-onboarding")},G=window.nfdOnboarding?.oldFlow?window.nfdOnboarding.oldFlow:l.rA,O=()=>{x(!1)};return(0,a.createElement)(u.A,{className:"nfd-onboarding-step--site-gen__error"},(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__error__container"},(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__error__container__orb"},(0,a.createElement)(m.A,{height:"100px"})),(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__error__container__heading"},(0,a.createElement)("p",{className:"nfd-onboarding-step--site-gen__error__container__heading__text"},I.heading)),(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__error__container__sub-heading"},(0,a.createElement)("p",{className:"nfd-onboarding-step--site-gen__error__container__sub-heading__text"},I.subHeading),(0,a.createElement)("p",{className:"nfd-onboarding-step--site-gen__error__container__sub-heading__message"},I.message,(0,a.createElement)("a",{className:"nfd-onboarding-step--site-gen__error__container__sub-heading__exit",href:f.R0},I.buttonExit))),(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__error__container__buttons"},(0,a.createElement)(_.Button,{className:"nfd-onboarding-step--site-gen__error__container__buttons__skip",onClick:()=>{(t=>{if(!(0,p.nC)(A,t))return!1;const n=window.nfdOnboarding.currentFlow,a=(0,w.Sg)(t)();h(a.steps),y(a?.topSteps),N(a.routes),S(a?.designRoutes),l.d0!==n&&(window.nfdOnboarding.oldFlow=n),window.nfdOnboarding.currentFlow=t,F.activeFlow=t,F.continueWithoutAi=!0,k(F),x(!1),l.d0!==t&&C(!0),e(a.steps[1].path)})(G)}},I.buttonSkip),D?(0,a.createElement)(_.Button,{className:"nfd-onboarding-step--site-gen__error__container__buttons__retry",onClick:()=>{O()}},(0,a.createElement)("p",{className:"nfd-onboarding-button--site-gen-next--text"},I.buttonText)):(0,a.createElement)(_.Fill,{name:`${f.Sr}/${f.gb}`},(0,a.createElement)(_.Button,{className:"nfd-onboarding-step--site-gen__error__container__buttons__retry",onClick:()=>{O()}},(0,a.createElement)("p",{className:"nfd-onboarding-button--site-gen-next--text"},I.buttonText))))))},E=({children:e})=>{const{siteGenErrorStatus:t}=(0,i.useSelect)((e=>({siteGenErrorStatus:e(o.M).getSiteGenErrorStatus()})));return(0,r.useEffect)((()=>{!0===t&&(0,s.v)(new s.iC(d.cW,void 0,{source:l.d0}))}),[t]),(0,a.createElement)(r.Fragment,null,t?(0,a.createElement)(v,null):e)}},619:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var a=n(1609),r=n(8468),i=n(7143),o=n(148),s=n(6087),d=n(3988),l=n(7675),c=n(8969),g=n(7044),_=n(7723);const u=()=>(0,a.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"24",viewBox:"-5 -2 36 24",fill:"none",className:"heart"},(0,a.createElement)("g",{id:"State=Active"},(0,a.createElement)("path",{id:"Vector",d:"M10 19.1585L8.975 18.2335C7.20833 16.6168 5.75 15.221 4.6 14.046C3.45 12.871 2.53333 11.821 1.85 10.896C1.16667 9.971 0.6875 9.1335 0.4125 8.3835C0.1375 7.6335 0 6.87516 0 6.1085C0 4.6085 0.504167 3.35433 1.5125 2.346C2.52083 1.33766 3.76667 0.833496 5.25 0.833496C6.2 0.833496 7.07917 1.0585 7.8875 1.5085C8.69583 1.9585 9.4 2.6085 10 3.4585C10.7 2.5585 11.4417 1.896 12.225 1.471C13.0083 1.046 13.85 0.833496 14.75 0.833496C16.2333 0.833496 17.4792 1.33766 18.4875 2.346C19.4958 3.35433 20 4.6085 20 6.1085C20 6.87516 19.8625 7.6335 19.5875 8.3835C19.3125 9.1335 18.8333 9.971 18.15 10.896C17.4667 11.821 16.55 12.871 15.4 14.046C14.25 15.221 12.7917 16.6168 11.025 18.2335L10 19.1585Z",fill:"#EF4A71"}))),m=function({count:e=1,isRegenerating:t}){const n=[];for(let r=0;r<e;r++)n.push((0,a.createElement)("div",{key:r,className:"regenerating-site-card-wrap"},(0,a.createElement)("div",{className:"regenerating-site-card"},(0,a.createElement)("p",{className:"regenerating-site-card__title"},t?(0,_.__)("Regenerating Site","wp-module-onboarding"):(0,_.__)("Generating Site","wp-module-onboarding")),(0,a.createElement)("div",{className:"regenerating-site-card__progress-bar"},(0,a.createElement)("div",{style:{animationDuration:2e3*Math.random()+1500+"ms"},className:"regenerating-site-card__progress-bar__fill"})))));return(0,a.createElement)(a.Fragment,null,n)};var p=n(7708),w=n(7517),b=n(8844),f=n(431),v=n(1056),E=n(2202),h=n(8744);const y=()=>{const e=(0,o.Zp)(),[t,n]=(0,r.useState)(!1),[y,N]=(0,r.useState)(!1),[S,C]=(0,r.useState)(!1),[k,x]=(0,r.useState)(!1),A=(0,r.useRef)(),{setIsHeaderEnabled:F,setSidebarActiveView:D,setHeaderActiveView:I,setDrawerActiveView:G,setCurrentOnboardingData:O,updateInitialize:H,setHideFooterNav:R,updateSiteGenErrorStatus:M,setIsHeaderNavigationEnabled:T}=(0,i.useDispatch)(l.M),{currentData:V,nextStep:B,siteGenErrorStatus:L}=(0,i.useSelect)((e=>({currentData:e(l.M).getCurrentOnboardingData(),nextStep:e(l.M).getNextStep(),siteGenErrorStatus:e(l.M).getSiteGenErrorStatus()})));(0,r.useEffect)((()=>{F(!0),R(!0),D(!1),I(c.Ix),G(!1),H(!0),T(!1)}),[V]),(0,r.useEffect)((()=>{!0===A.current&&!1===L&&(z(),q()),A.current=L}),[L]);const z=async()=>{if(C(!0),!(0,s.isEmpty)(V.sitegen.homepages.data))return n(V.sitegen.homepages.data),C(!1),void W();if(""===V.sitegen.siteDetails?.prompt)return void C(!1);const e=await(0,p.c7)(V.sitegen.siteDetails.prompt);if(e.error)return C(!1),void M(!0);V.sitegen.homepages.data=e.body,n(e.body),O(V),C(!1),W()},W=()=>{window.nfdOnboarding.siteGenTimerInterval&&(clearInterval(window.nfdOnboarding.siteGenTimerInterval),(0,v.v)(new v.iC(E.uv,window.nfdOnboarding.siteGenTime,{source:h.d0})))},q=async()=>{const e=await(0,w.w6)();e.error?C(!1):x(e.body)};(0,r.useEffect)((()=>{z(),q()}),[]);const Z=(n,a)=>{if(!(n in t))return!1;V.sitegen.homepages.active=t[n],V.sitegen.skipCache=!1,O(V),(0,v.v)(new v.iC(E.Wi,n,{position:a,source:h.d0})),e(B.path)},P=(e,a)=>{if(!(e in t))return;const r=!t[e].isFavorite;t[e].isFavorite=r,V.sitegen.homepages.data=t,n(t),O(V),(0,v.v)(new v.iC(E.Nz,e,{favorite:r,placement:"preview_grid",position:a,source:h.d0}))},$=async(e,a,r,i)=>{if(document.getElementsByClassName("nfd-onboarding-step--site-gen__preview__note")&&document.getElementsByClassName("nfd-onboarding-step--site-gen__preview__note")[0].scrollIntoView({behavior:"smooth",block:"end"}),N(!0),!(e in t))return void N(!1);if(""===V.sitegen.siteDetails?.prompt)return void N(!1);const o=await(0,p.HA)(V.sitegen.siteDetails.prompt,e,a,r);if(o.error)return void N(!1);const s=o.body;t[s.slug]=s,V.sitegen.homepages.data=t,n(t),O(V),N(!1),(0,v.v)(new v.iC(E.Hf,e,{position:i,source:h.d0,placement:"preview_grid"}))},j={heading:(0,_.__)("Presto, here are 3 versions","wp-module-onboarding"),subheading:(0,_.__)("We've created 3 unique website designs for you to start with, preview click around or start over.","wp-module-onboarding"),favouriteNote:(0,_.__)("Favorite a generated version to find and use again in the future.","wp-module-onboarding"),generating:(0,_.__)("Generating Site","wp-module-onboarding"),regenerating:(0,_.__)("Regenerating Site","wp-module-onboarding")};return(0,a.createElement)(b.A,null,(0,a.createElement)(d.A,{className:"nfd-onboarding-step--site-gen__preview"},(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__preview__container"},!S&&(0,a.createElement)(f.A,{type:"fade-in"},(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__preview__container__heading"},(0,a.createElement)("p",{className:"nfd-onboarding-step--site-gen__preview__container__heading__text"},j.heading)),(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__preview__container__sub-heading"},(0,a.createElement)("p",{className:"nfd-onboarding-step--site-gen__preview__container__sub-heading__text"},j.subheading)))),(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__preview__options"},t&&k&&!S?Object.keys(t).map(((e,n)=>{const r=t[e],i=(0,s.cloneDeep)(k[0]);i.settings.color.palette=r.color.palette;const o=r.styles?.blocks[0]?.["core/body"]?.typography?.fontFamily,d=r.styles?.blocks[0]?.["core/heading"]?.typography?.fontFamily;i.styles.typography&&o&&(i.styles.typography.fontFamily=o),i.styles.blocks["core/heading"].typography&&d&&(i.styles.blocks["core/heading"].typography.fontFamily=d);let l="";return["header","content","footer"].forEach((e=>{e in r&&(l+=r[e])})),(0,a.createElement)(g.GZ,{key:n,blockGrammar:l,previewSettings:i,slug:e,position:n+1,title:r.title,isFavorite:r.isFavorite,palette:r.color,styling:"custom",overlay:!0,tabIndex:"0",role:"button",handleFavorite:P,handleRegenerate:$,handlePreview:Z,isRegenerating:y})})):(0,a.createElement)(m,{count:3,isRegenerating:!1}),y&&(0,a.createElement)(m,{count:1,isRegenerating:!0})),(0,a.createElement)("div",{className:"nfd-onboarding-step--site-gen__preview__note"},(0,a.createElement)(u,null),(0,a.createElement)("span",null,j.favouriteNote))))}}}]);